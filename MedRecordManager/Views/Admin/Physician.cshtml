@model PhysicianVm
@{
    ViewData["Title"] = "Set Up Physican";
}

@section scripts{
    <script type="text/javascript">

        $(document).on('click', '.deletePh', function () {
            var pvid = $(this).parent().parent().find('.primaryId').text()
            $.ajax({
                url: '/admin/deletePhyisican',
                type: 'post',
                data: {
                    pvPhysicianId: parseInt(pvid, 10),
                    officeKey: $('#ddlOfficeKey').val()
                }
            }).done(function (response) {
                $('#results').html(response);
                $('#addNew').html('');
            });
        });

        $(document).on('click', '.addPh', function () {
            $.ajax({
                url: '/admin/addPhysician',
                type: 'get',
            }).done(function (response) {
                $('#addNew').html(response);
                $('#results').html('');
            });
        });


        function mappedPhysician() {
            $.ajax({
                url: '/admin/getMapedPh',
                type: 'get',
                data: { officeKey: $('#ddlOfficeKey').val() }
            }).done(function (response) {
                $('#results').html(response);
                $('#addNew').html('');
            });
        };

       

        function onSuccess(context) {
            $('#results').html(context);
            $('#addNew').html('');
        };

        $(document).ready(function () {
            $('#ddlOfficeKey').change(function () {
                mappedPhysician()
            });
      
        });
    </script>

}
<h2>Physican</h2>
<form asp-action="SavePhysician" asp-controller="Admin" data-ajax="true" data-ajax-method="POST" data-ajax-complete="onComplete" data-ajax-success="onSuccess">
    <div class="row">
        <div class="col-sm-2">
            <div class="form-group">
                <label asp-for="Input.OfficeKey" class="control-label">Office Key:</label>
                <select class="form-control" asp-for="Input.OfficeKey" , asp-items="@Model.Input.OfficeKeys" id="ddlOfficeKey"></select>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-10">
            <div id="addNew">
            </div>
        </div>
    </div>
</form>
    <div class="row">
        <div class="col-lg-10">
            <div id="results">
            </div>
        </div>
    </div>

